<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhangchuang.complex.mapper.RatingsMapper">


    <resultMap id="RatingsResult" type="StudentGrade">
        <id property="ratingsId" column="ratings_id"/>
        <result property="studentName" column="username"/>
        <result property="studentId" column="student_id"/>
        <result property="self" column="self"/>
        <result property="status" column="status"/>
        <result property="information" column="information"/>
        <result property="communicate" column="communicate"/>
        <result property="team" column="team"/>
        <result property="solve" column="solve"/>
        <result property="innovation" column="innovation"/>
        <result property="lastTimeResult" column="last_time_result"/>
        <result property="createTime" column="create_time"/>
        <result property="createBy" column="create_by"/>
        <result property="updateTime" column="update_time"/>
        <result property="updateBy" column="update_by"/>
    </resultMap>

    <sql id="ratingResultVO">
        select ratings_id,
               student_id,
               username,
               self,
               information,
               communicate,
               team,
               status,
               solve,
               innovation,
               last_time_result,
               create_time,
               create_by,
               update_time,
               update_by
        from user_ratings
    </sql>

    <!--List<StudentGrade> selectRatingList(Student students);-->
    <select id="selectRatingList" resultType="StudentGrade" resultMap="RatingsResult">
        <include refid="ratingResultVO"/>
    </select>

    <!--StudentGrade getRatingInfoById(Long id);-->
    <select id="getRatingInfoById" resultType="StudentGrade" resultMap="RatingsResult">
        <include refid="ratingResultVO"/>
        where student_id = #{id}
    </select>

    <!--Integer updateRating(StudentGrade studentGrade);-->
    <update id="updateRating">
        update user_ratings
        <set>
            <if test="self != null and self != ''">self = #{self},</if>
            <if test="information != null and information != ''">information = #{information},</if>
            <if test="communicate != null and communicate !=''">communicate = #{communicate},</if>
            <if test="team != null and team != ''">team = #{team},</if>
            <if test="solve != null and solve != ''">solve = #{solve},</if>
            <if test="innovation != null and innovation != ''">innovation = #{innovation},</if>
            <if test="lastTimeResult != null and lastTimeResult != ''">last_Time_Result = #{lastTimeResult},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            update_time = sysdate(),update_by = #{updateBy}
        </set>
        where student_id = #{studentId}
    </update>
</mapper>
